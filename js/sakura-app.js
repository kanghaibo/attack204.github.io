// build time:Fri Jan 18 2019 13:55:51 GMT+0800 (GMT+08:00)
var _typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function cloneObject(e){if(null==e||"object"!=("undefined"===typeof e?"undefined":_typeof(e)))return e;if(e instanceof Date){var t=new Date(e.getDate());return t}if(e instanceof Array){for(var t=[],a=0,i=e.length;a<i;a++)t[a]=e[a];return t}if(e instanceof Object){t={};for(a in e)e.hasOwnProperty(a)&&(t[a]=cloneObject(e[a]));return t}}function hermitInit(){var e=document.getElementsByClassName("aplayer");ap=[];for(var t=[],a=[],i=function(i){e[i].dataset.songs&&(a[i]=cloneObject(e[i].dataset),a[i].element=e[i],t[i]=new XMLHttpRequest,t[i].onreadystatechange=function(){var o=t.indexOf(this),n=a[o];n.storageName="HxAP-Setting";if(4===this.readyState)if(200<=this.status&&300>this.status||304===this.status){var s=JSON.parse(this.responseText);n.music=s.msg.songs;if(void 0===n.music)return console.warn("Hermit-X failed to load "+a[o].songs),!1;void 0===n.showlrc&&(n.lrcType=n.music[0].lrc?3:0);1===n.music.length&&(n.music=n.music[0]);n.autoplay&&(n.autoplay="true"===n.autoplay);n.listfolded&&(n.listFolded="true"===n.listfolded);n.mutex&&(n.mutex="true"===n.mutex);n.narrow&&(n.narrow="true"===n.narrow);ap[i]=new APlayer(n);ap[i].parseRespons=s;if(window.APlayerCall&&window.APlayerCall[i])window.APlayerCall[i]();window.APlayerloadAllCall&&e.length!=ap.length&&window.APlayerloadAllCall()}else console.error("Request was unsuccessful: "+this.status)},a[i].songs.split("#:"),n=HermitX.ajaxurl+"?action=hermit&scope="+a[i].songs.split("#:")[0]+"&id="+a[i].songs.split("#:")[1]+"&_nonce="+a[i]._nonce,t[i].open("get",n,!0),t[i].send(null))},o=0;o<e.length;o++){var n;i(o)}}function reloadHermit(){for(var e=0;e<ap.length;e++)try{ap[e].destroy()}catch(t){}hermitInit()}var ap=[];hermitInit();console.log("\n %c Hermit X Music Helper v"+HermitX.version+" %c https://lwl.moe/HermitX \n","color: #fff; background: #4285f4; padding:5px 0;","background: #66CCFF; padding:5px 0;");(function e(t,a){if(typeof exports==="object"&&typeof module==="object"){module.exports=a()}else{if(typeof define==="function"&&define.amd){define([],a)}else{if(typeof exports==="object"){exports.POWERMODE=a()}else{t.POWERMODE=a()}}}})(this,function(){return function(e){var t={};function a(i){if(t[i]){return t[i].exports}var o=t[i]={exports:{},id:i,loaded:false};e[i].call(o.exports,o,o.exports,a);o.loaded=true;return o.exports}a.m=e;a.c=t;a.p="";return a(0)}([function(e,t,a){var i=document.createElement("canvas");i.width=window.innerWidth;i.height=window.innerHeight;i.style.cssText="position:fixed;top:0;left:0;pointer-events:none;z-index:999999";window.addEventListener("resize",function(){i.width=window.innerWidth;i.height=window.innerHeight});document.body.appendChild(i);var o=i.getContext("2d");var n=[];var s=0;u.shake=true;function r(e,t){return Math.random()*(t-e)+e}function l(e){if(u.colorful){var t=r(0,360);return"hsla("+r(t-10,t+10)+", 100%, "+r(50,80)+"%, "+1+")"}else{return window.getComputedStyle(e).color}}function c(){var e=document.activeElement;var t;if(e.tagName==="TEXTAREA"||e.tagName==="INPUT"&&e.getAttribute("type")==="text"){var i=a(1)(e,e.selectionStart);t=e.getBoundingClientRect();return{x:i.left+t.left,y:i.top+t.top,color:l(e)}}var o=window.getSelection();if(o.rangeCount){var n=o.getRangeAt(0);var s=n.startContainer;if(s.nodeType===document.TEXT_NODE){s=s.parentNode}t=n.getBoundingClientRect();return{x:t.left,y:t.top,color:l(s)}}return{x:0,y:0,color:"transparent"}}function d(e,t,a){return{x:e,y:t,alpha:1,color:a,velocity:{x:-1+Math.random()*2,y:-3.5+Math.random()*2}}}function u(){var e=c();var t=5+Math.round(Math.random()*10);while(t--){n[s]=d(e.x,e.y,e.color);s=(s+1)%500}if(u.shake){var a=1+2*Math.random();var i=a*(Math.random()>.5?-1:1);var o=a*(Math.random()>.5?-1:1);document.body.style.marginLeft=i+"px";document.body.style.marginTop=o+"px";setTimeout(function(){document.body.style.marginLeft="";document.body.style.marginTop=""},75)}}u.colorful=false;function p(){requestAnimationFrame(p);o.clearRect(0,0,i.width,i.height);for(var e=0;e<n.length;++e){var t=n[e];if(t.alpha<=.1){continue}t.velocity.y+=.075;t.x+=t.velocity.x;t.y+=t.velocity.y;t.alpha*=.96;o.globalAlpha=t.alpha;o.fillStyle=t.color;o.fillRect(Math.round(t.x-1.5),Math.round(t.y-1.5),3,3)}}requestAnimationFrame(p);e.exports=u},function(e,t){(function(){var t=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"];var a=window.mozInnerScreenX!=null;function i(e,i,o){var n=o&&o.debug||false;if(n){var s=document.querySelector("#input-textarea-caret-position-mirror-div");if(s){s.parentNode.removeChild(s)}}var r=document.createElement("div");r.id="input-textarea-caret-position-mirror-div";document.body.appendChild(r);var l=r.style;var c=window.getComputedStyle?getComputedStyle(e):e.currentStyle;l.whiteSpace="pre-wrap";if(e.nodeName!=="INPUT"){l.wordWrap="break-word"}l.position="absolute";if(!n){l.visibility="hidden"}t.forEach(function(e){l[e]=c[e]});if(a){if(e.scrollHeight>parseInt(c.height)){l.overflowY="scroll"}}else{l.overflow="hidden"}r.textContent=e.value.substring(0,i);if(e.nodeName==="INPUT"){r.textContent=r.textContent.replace(/\s/g," ")}var d=document.createElement("span");d.textContent=e.value.substring(i)||".";r.appendChild(d);var u={top:d.offsetTop+parseInt(c.borderTopWidth),left:d.offsetLeft+parseInt(c.borderLeftWidth)};if(n){d.style.backgroundColor="#aaa"}else{document.body.removeChild(r)}return u}if(typeof e!="undefined"&&typeof e.exports!="undefined"){e.exports=i}else{window.getCaretCoordinates=i}})()}])});mashiro_global.variables=new function(){this.has_bot_ui=false;this.isNight=false;this.skinSecter=false};mashiro_global.ini=new function(){this.normalize=function(){lazyload();social_share();mashiro_global.post_list_show_animation.ini();if(window.is_app){try{setTimeout(function(){mashiro_option.app_update(true)},1e4)}catch(e){}}if($("div").hasClass("poem-wrap")){get_poem("#poem","#info")}$(function(){function e(){$("#banner_wave_1").css({left:"-236px"}).animate({left:"-1233px"},25e3,"linear",e)}function t(){$("#banner_wave_2").css({left:"0px"}).animate({left:"-1009px"},6e4,"linear",t)}if(screen&&screen.width>860){e();t()}if(navigator.userAgent.indexOf("AppleWebKit")!=-1){$("body").addClass("isWebKit")}hearthstone_deck_iframe()})};this.pjax=function(){pjaxInit();social_share();mashiro_global.post_list_show_animation.ini();if($("div").hasClass("poem-wrap")){get_poem("#poem","#info")}hearthstone_deck_iframe()}};mashiro_global.lib=new function(){this.removeClass=function(e,t){var a=document.getElementById(e);if(a.classList)a.classList.remove(t);else a.className=a.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")};this.addClass=function(e,t){var a=document.getElementById(e);if(a.classList)a.classList.add(t);else a.className+=" "+t};this.hasClass=function(e,t){var a=document.getElementById(e);if(a.classList)var i=a.classList.contains(t);else var i=new RegExp("(^| )"+t+"( |$)","gi").test(a.className);return i};this.toggleClass=function(e,t){var a=document.getElementById(e);if(a.classList){a.classList.toggle(t)}else{var i=a.className.split(" ");var o=i.indexOf(t);if(o>=0)i.splice(o,1);else i.push(t);a.className=i.join(" ")}};this.saveFile=function(e,t){var a=new XMLHttpRequest;a.responseType="blob";a.onload=function(){var e=document.createElement("a");e.href=window.URL.createObjectURL(a.response);e.download=t;e.style.display="none";document.body.appendChild(e);e.click()};a.open("GET",e);a.send()}};function setCookie(e,t,a){var i="";if(a){var o=new Date;o.setTime(o.getTime()+a*24*60*60*1e3);i="; expires="+o.toUTCString()}document.cookie=e+mashiro_option.cookie_version_control+"="+(t||"")+i+"; path=/"}function getCookie(e){var t=e+mashiro_option.cookie_version_control+"=";var a=document.cookie.split(";");for(var i=0;i<a.length;i++){var o=a[i];while(o.charAt(0)==" ")o=o.substring(1,o.length);if(o.indexOf(t)==0)return o.substring(t.length,o.length)}return null}function removeCookie(e){document.cookie=e+mashiro_option.cookie_version_control+"=; Max-Age=-99999999;"}function jumpTo(e){return mashiro_global.lib.pjax_to_url(e,"#page")}function injectStyles(e){var t=$("<div />",{html:"&shy;<style>"+e+"</style>"}).appendTo("body")}function imgError(e,t){switch(t){case 1:if(e.src.includes("https://cn.gravatar.com/avatar")){e.src=e.src.replace("https://cn.gravatar.com/avatar/","https://cdn.v2ex.com/gravatar/")}else{e.src="https://view.moezx.cc/images/2017/12/30/Transparent_Akkarin.th.jpg"}break;case 2:e.src="https://gravatar.shino.cc/avatar/?s=80&d=mm&r=g";break;case 3:if(e.src.includes("https://static.2heng.xin/")){e.src=e.src.replace("https://static.2heng.xin/wp-content/uploads/","https://cdn.2heng.xin/")}else{e.src="https://view.moezx.cc/images/2018/05/13/image-404.png"}break;default:e.src="https://view.moezx.cc/images/2018/05/13/image-404.png"}}mashiro_global.post_list_show_animation=new function(){this.ini=function(e){$("article.post-list-thumb").each(function(t){if(e){var a=$(window).height()}else{if($(".headertop").hasClass("headertop-bar")){var a=0}else{var a=$(window).height()-300}}if(!mashiro_global.landing_at_home){a+=300}var i=$("article.post-list-thumb").eq(t).offset().top;if($(window).height()+$(window).scrollTop()>=i)$("article.post-list-thumb").eq(t).addClass("post-list-show");$(window).scroll(function(){var e=$(window).scrollTop();if(e+a>=i&&e)$("article.post-list-thumb").eq(t).addClass("post-list-show")})})}};mashiro_global.font_control=new function(){this.change_font=function(){if($("body").hasClass("serif")){$("body").removeClass("serif");$(".control-btn-serif").removeClass("selected");$(".control-btn-sans-serif").addClass("selected");setCookie("font_family","sans-serif",30)}else{$("body").addClass("serif");$(".control-btn-serif").addClass("selected");$(".control-btn-sans-serif").removeClass("selected");setCookie("font_family","serif",30);if(document.body.clientWidth<=860){addComment.createButterbar("将从网络加载字体，流量请注意")}}};this.ini=function(){if(document.body.clientWidth>860){if(!getCookie("font_family")||getCookie("font_family")=="serif")$("body").addClass("serif")}if(getCookie("font_family")=="sans-serif"){$("body").removeClass("sans-serif");$(".control-btn-serif").removeClass("selected");$(".control-btn-sans-serif").addClass("selected")}}};mashiro_global.font_control.ini();function code_highlight_style(){function e(e){var t={autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false",contenteditable:"false",design:"by Mashiro"};var a=$("pre:eq("+e+")")[0].children[0].className;var i=a.substr(0,a.indexOf(" ")).replace("language-","");if(i.toLowerCase()=="hljs")var i="text";if(i.toLowerCase()=="js")var i="javascript";if(i.toLowerCase()=="md")var i="markdown";if(i.toLowerCase()=="py")var i="python";$("pre:eq("+e+")").addClass("highlight-wrap");for(var o in t){$("pre:eq("+e+")").attr(o,t[o])}$("pre:eq("+e+") code").attr("data-rel",i.toUpperCase())}$("pre code").each(function(e,t){hljs.highlightBlock(t)});for(var t=0;t<$("pre").length;t++){e(t)}hljs.initLineNumbersOnLoad();$("pre").on("click",function(e){if(e.target!==this)return;$(this).toggleClass("code-block-fullscreen");$("html").toggleClass("code-block-fullscreen-html-scroll")})}try{code_highlight_style()}catch(e){}function attach_image(){$("#upload-img-file").change(function(){if(this.files.length>10){addComment.createButterbar("每次上传上限为10张.<br>10 files max per request.");return 0}for(e=0;e<this.files.length;e++){if(this.files[e].size>=5242880){alert("图片上传大小限制为5 MB.\n5 MB max per file.\n\n「"+this.files[e].name+"」\n\n这张图太大啦~\nThis image is too large~")}}for(var e=0;e<this.files.length;e++){var t=this.files[e];var a=new FormData;a.append("smfile",t);$.ajax({url:"https://sm.ms/api/upload",type:"POST",processData:false,contentType:false,data:a,beforeSend:function(e){$(".insert-image-tips").html('<i class="fa fa-spinner rotating" aria-hidden="true"></i>');addComment.createButterbar("上传中...<br>Uploading...")},success:function(e){$(".insert-image-tips").html('<i class="fa fa-check" aria-hidden="true"></i>');setTimeout(function(){$(".insert-image-tips").html('<i class="fa fa-picture-o" aria-hidden="true"></i>')},1e3);var t=e.data.url.replace("https://i.loli.net/","https://static.shino.cc/user-upload/");$("#upload-img-show").append('<img class="lazyload upload-image-preview" src="https://cdn.jsdelivr.net/gh/moezx/cdn@3.0.2/img/svg/loader/trans.ajax-spinner-preloader.svg" data-src="'+t+'" onclick="window.open(\''+t+'\')" onerror="imgError(this)" />');lazyload();addComment.createButterbar("图片上传成功~<br>Uploaded successfully~");grin(e.data.url.replace("https://i.loli.net/","{UPLOAD}"),type="Img")},error:function(){$(".insert-image-tips").html('<i class="fa fa-times" aria-hidden="true" style="color:red"></i>');alert("上传失败，请重试.\nUpload failed, please try again.");setTimeout(function(){$(".insert-image-tips").html('<i class="fa fa-picture-o" aria-hidden="true"></i>')},1e3)}})}})}function clean_upload_images(){$("#upload-img-show").html("")}function add_upload_tips(){$('<div class="insert-image-tips popup"><i class="fa fa-picture-o" aria-hidden="true"></i><span class="insert-img-popuptext" id="uploadTipPopup">上传图片</span></div><input id="upload-img-file" type="file" accept="image/*" multiple="multiple" class="insert-image-button">').insertAfter($(".form-submit #submit"));attach_image();$("#upload-img-file").hover(function(){$(".insert-image-tips").addClass("insert-image-tips-hover");$("#uploadTipPopup").addClass("show")},function(){$(".insert-image-tips").removeClass("insert-image-tips-hover");$("#uploadTipPopup").removeClass("show")})}function click_to_view_image(){$(".comment_inline_img").click(function(){var e=$(this).attr("src");window.open(e)})}click_to_view_image();function original_emoji_click(){$(".emoji-item").click(function(){grin($(this).text(),type="custom",before="`",after="` ")})}original_emoji_click();function showPopup(e){var t=e.querySelector("#thePopup");t.classList.toggle("show")}function cmt_showPopup(e){var t=$(e).find("#thePopup");t.addClass("show");$(e).find("input").blur(function(){t.removeClass("show")})}function headertop_down(){var e=$("#content").offset().top;$("html,body").animate({scrollTop:e},600)}function scrollBar(){if(document.body.clientWidth>860){$(window).scroll(function(){var e=$(window).scrollTop();var t=$(document).height();var a=$(window).height();var i=parseInt(e/(t-a)*100);$("#bar").css("width",i+"%");if(false){if(i>=0&&i<=19)$("#bar").css("background","#cccccc");if(i>=20&&i<=39)$("#bar").css("background","#50bcb6");if(i>=40&&i<=59)$("#bar").css("background","#85c440");if(i>=60&&i<=79)$("#bar").css("background","#f2b63c");if(i>=80&&i<=99)$("#bar").css("background","#FF0000");if(i==100)$("#bar").css("background","#5aaadb")}else{$("#bar").css("background","orange")}$(".toc-container").css("height",$(".site-content").outerHeight());$(".skin-menu").removeClass("show")})}}scrollBar();"主题切换代码好恶心，有空一定要重构";function checkBgImgCookie(){var e=getCookie("bgImgSetting");if(!e){$("#banner_wave_1").removeClass("banner_wave_hide_fit_skin");$("#banner_wave_2").removeClass("banner_wave_hide_fit_skin")}else{$("#banner_wave_1").addClass("banner_wave_hide_fit_skin");$("#banner_wave_2").addClass("banner_wave_hide_fit_skin")}if(e!=""){if(e=="https://view.moezx.cc/images/2018/01/03/sakura.png"||e=="https://view.moezx.cc/images/2018/01/03/plaid2dbf8.jpg"||e=="https://view.moezx.cc/images/2018/01/10/star02.png"||e=="https://view.moezx.cc/images/2018/01/24/kyotoanimation.png"||e=="https://view.moezx.cc/images/2018/09/17/little-monster.png"){mashiro_global.variables.skinSecter=true;mashiro_global.variables.isNight=false;$("#night-mode-cover").css("visibility","hidden");$("body").css("background-image","url("+e+")");$(".blank").css("background-color","rgba(255,255,255,1)");$(".pattern-center").removeClass("pattern-center").addClass("pattern-center-sakura");$(".headertop-bar").removeClass("headertop-bar").addClass("headertop-bar-sakura")}else if(e=="https://api.shino.cc/bing/"){mashiro_global.variables.skinSecter=true;mashiro_global.variables.isNight=true;$("#night-mode-cover").css("visibility","hidden");$("body").css("background-image","url("+e+")");$(".blank").css("background-color","rgba(255,255,255,1)");$(".pattern-center").removeClass("pattern-center").addClass("pattern-center-sakura");$(".headertop-bar").removeClass("headertop-bar").addClass("headertop-bar-sakura")}else{}}else{return false}}if(document.body.clientWidth>860){checkBgImgCookie()}function no_right_click(){$(".post-thumb img").bind("contextmenu",function(e){return false})}if(mashiro_global.variables.isNight){$(".changeSkin-gear, .toc").css("background","rgba(255,255,255,0.8)")}else{$(".changeSkin-gear, .toc").css("background","none")}$(document).ready(function(){function e(e,t){$(".skin-menu "+e).click(function(){mashiro_global.variables.skinSecter=true;mashiro_global.variables.isNight=false;$("#night-mode-cover").css("visibility","hidden");$("body").css("background-image","url("+t+")");$(".blank").css("background-color","rgba(255,255,255,1)");$(".pattern-center").removeClass("pattern-center").addClass("pattern-center-sakura");$(".headertop-bar").removeClass("headertop-bar").addClass("headertop-bar-sakura");$("#banner_wave_1").addClass("banner_wave_hide_fit_skin");$("#banner_wave_2").addClass("banner_wave_hide_fit_skin");a();setCookie("bgImgSetting",t,30)})}function t(e,t){$(".skin-menu "+e).click(function(){mashiro_global.variables.skinSecter=true;mashiro_global.variables.isNight=true;$("#night-mode-cover").css("visibility","hidden");$("body").css("background-image","url("+t+")");$(".blank").css("background-color","rgba(255,255,255,1)");$(".pattern-center").removeClass("pattern-center").addClass("pattern-center-sakura");$(".headertop-bar").removeClass("headertop-bar").addClass("headertop-bar-sakura");$("#banner_wave_1").addClass("banner_wave_hide_fit_skin");$("#banner_wave_2").addClass("banner_wave_hide_fit_skin");a();setCookie("bgImgSetting",t,30)})}e("#sakura-bg","https://view.moezx.cc/images/2018/01/03/sakura.png");e("#gribs-bg","https://view.moezx.cc/images/2018/01/03/plaid2dbf8.jpg");e("#pixiv-bg","https://view.moezx.cc/images/2018/01/10/star02.png");e("#KAdots-bg","https://view.moezx.cc/images/2018/01/24/kyotoanimation.png");e("#totem-bg","https://view.moezx.cc/images/2018/09/17/little-monster.png");t("#bing-bg","https://api.shino.cc/bing/");$(".skin-menu #white-bg").click(function(){mashiro_global.variables.skinSecter=false;mashiro_global.variables.isNight=false;$("#night-mode-cover").css("visibility","hidden");$("body").css("background-image","none");$(".blank").css("background-color","rgba(255,255,255,.0)");$(".pattern-center-sakura").removeClass("pattern-center-sakura").addClass("pattern-center");$(".headertop-bar-sakura").removeClass("headertop-bar-sakura").addClass("headertop-bar");$("#banner_wave_1").removeClass("banner_wave_hide_fit_skin");$("#banner_wave_2").removeClass("banner_wave_hide_fit_skin");a();setCookie("bgImgSetting","",30)});$(".skin-menu #dark-bg").click(function(){mashiro_global.variables.skinSecter=true;mashiro_global.variables.isNight=true;$("body").css("background-image","url(https://cdn.jsdelivr.net/gh/moezx/cdn@3.1.2/other-sites/api-index/images/me.png)");$(".blank").css("background-color","rgba(255,255,255,.8)");$("#night-mode-cover").css("visibility","visible");$(".pattern-center").removeClass("pattern-center").addClass("pattern-center-sakura");$(".headertop-bar").removeClass("headertop-bar").addClass("headertop-bar-sakura");$("#banner_wave_1").addClass("banner_wave_hide_fit_skin");$("#banner_wave_2").addClass("banner_wave_hide_fit_skin");a()});function a(){$(".skin-menu").removeClass("show");setTimeout(function(){$(".changeSkin-gear").css("visibility","visible")},300);if(mashiro_global.variables.isNight){$(".changeSkin-gear, .toc").css("background","rgba(255,255,255,0.8)")}else{$(".changeSkin-gear, .toc").css("background","none")}}$(".changeSkin-gear").click(function(){$(".skin-menu").toggleClass("show");if(mashiro_global.variables.isNight){$(".changeSkin").css("background","rgba(255,255,255,0.8)")}else{$(".changeSkin").css("background","none")}});$(".skin-menu #close-skinMenu").click(function(){a()});add_upload_tips()});var bgn=1;function nextBG(){$(".centerbg").css("background-image","url(/images/cover/"+Math.abs(bgn%3)+".jpg)");bgn=bgn+1}function preBG(){bgn=bgn-1;$(".centerbg").css("background-image","url(/images/cover/"+Math.abs(bgn%3)+".jpg)")}$(document).ready(function(){$("#bg-next").click(function(){nextBG()});$("#bg-pre").click(function(){preBG()})});if(document.body.clientWidth<=860&&!window.is_app){window.onscroll=function(){scrollFunction()};function scrollFunction(){if(document.body.scrollTop>20||document.documentElement.scrollTop>20){document.getElementById("moblieGoTop").style.display="block"}else{document.getElementById("moblieGoTop").style.display="none"}}function topFunction(){document.body.scrollTop=0;document.documentElement.scrollTop=0}}function reload_show_date_time(){BirthDay=new Date("06/02/2017 18:00:00");today=new Date;timeold=today.getTime()-BirthDay.getTime();sectimeold=timeold/1e3;secondsold=Math.floor(sectimeold);msPerDay=24*60*60*1e3;e_daysold=timeold/msPerDay;daysold=Math.floor(e_daysold);monitorday.innerHTML=daysold}function timeSeriesReload(e){if(e==true){$("#archives span.al_mon").click(function(){$(this).next().slideToggle(400);return false});lazyload()}else{(function(){$("#al_expand_collapse,#archives span.al_mon").css({cursor:"s-resize"});$("#archives span.al_mon").each(function(){var e=$(this).next().children("li").length;$(this).children("#post-num").text(e)});var e=$("#archives ul.al_post_list"),t=$("#archives ul.al_post_list:first");e.hide(1,function(){t.show()});$("#archives span.al_mon").click(function(){$(this).next().slideToggle(400);return false});if(document.body.clientWidth>860){$("#archives li.al_li").mouseover(function(){$(this).children(".al_post_list").show(400);return false});if(false){$("#archives li.al_li").mouseout(function(){$(this).children(".al_post_list").hide(400);return false})}}var a=0;$("#al_expand_collapse").click(function(){if(a==0){e.show();a++}else if(a==1){e.hide();a--}})})()}}timeSeriesReload();function tableOfContentScroll(e){if(document.body.clientWidth<=1200){return}else if($("div").hasClass("have-toc")==false&&$("div").hasClass("has-toc")==false){$(".toc-container").remove()}else{$(document).ready(function(){if($("div").hasClass("toc")){$(".toc-container").css("height",$(".site-content").outerHeight());setTimeout(function(){$(".toc-container").css("height",$(".site-content").outerHeight())},1e3);setTimeout(function(){$(".toc-container").css("height",$(".site-content").outerHeight())},6e3)}});if(e){var t=1;$(".entry-content , .links").children("h1,h2,h3,h4,h5").each(function(){var e="toc-head-"+t;$(this).attr("id",e);t++});tocbot.init({tocSelector:".toc",contentSelector:[".entry-content",".links"],headingSelector:"h1, h2, h3, h4, h5",scrollEndCallback:function(e){}})}}}tableOfContentScroll(flag=true);var pjaxInit=function(){add_upload_tips();click_to_view_image();original_emoji_click();mashiro_global.font_control.ini();$("p").remove(".head-copyright");try{code_highlight_style()}catch(e){}try{inlojv_js_getqqinfo()}catch(e){}lazyload();$("#to-load-aplayer").click(function(){try{reloadHermit()}catch(e){}$("div").remove(".load-aplayer")});if($("div").hasClass("aplayer")){reloadHermit()}if($("div").hasClass("popcontainer")){loadBotui()}try{reload_show_date_time()}catch(e){}if(mashiro_global.variables.skinSecter===true){$(".pattern-center").removeClass("pattern-center").addClass("pattern-center-sakura");$(".headertop-bar").removeClass("headertop-bar").addClass("headertop-bar-sakura");if(mashiro_global.variables.isNight){$(".blank").css("background-color","rgba(255,255,255,1)");$(".toc").css("background-color","rgba(255,255,255,0.8)")}}$(".iconflat").css("width","50px").css("height","50px");$(".openNav").css("height","50px");$("#bg-next").click(function(){nextBG()});$("#bg-pre").click(function(){preBG()});smileBoxToggle();timeSeriesReload();add_copyright();tableOfContentScroll(flag=true);console.log($("#myscript").text())};$(document).on("click",".sm",function(){var e="您真的要设为私密吗？";if(confirm(e)==true){$(this).commentPrivate()}else{aler("已取消")}});$.fn.commentPrivate=function(){if($(this).hasClass("private_now")){alert("您之前已设过私密评论");return false}else{$(this).addClass("private_now");var e=$(this).data("idp"),t=$(this).data("actionp"),a=$(this).children(".has_set_private");var i={action:"siren_private",p_id:e,p_action:t};$.post("/wp-admin/admin-ajax.php",i,function(e){$(a).html(e)});return false}};function show_date_time(){BirthDay=new Date("06/02/2017 18:00:00");today=new Date;timeold=today.getTime()-BirthDay.getTime();sectimeold=timeold/1e3;secondsold=Math.floor(sectimeold);msPerDay=24*60*60*1e3;e_daysold=timeold/msPerDay;daysold=Math.floor(e_daysold);monitorday.innerHTML=daysold}try{show_date_time()}catch(e){}POWERMODE.colorful=true;POWERMODE.shake=false;document.body.addEventListener("input",POWERMODE);function motionSwitch(e){var t=[".bili",".menhera",".tieba"];for(var a in t){$(t[a]+"-bar").removeClass("on-hover");$(t[a]+"-container").css("display","none")}$(e+"-bar").addClass("on-hover");$(e+"-container").css("display","block")}$(".comt-addsmilies").click(function(){$(".comt-smilies").toggle()});$(".comt-smilies a").click(function(){$(this).parent().hide()});function smileBoxToggle(){$(document).ready(function(){$("#emotion-toggle").click(function(){$(".emotion-toggle-off").toggle(0);$(".emotion-toggle-on").toggle(0);$(".emotion-box").toggle(160)})})}smileBoxToggle();function grin(e,t,a,i){var o;if(t=="custom"){e=a+e+i}else if(t=="Img"){e="[img]"+e+"[/img]"}else if(t=="Math"){e=" f(x)=∫("+e+")sec²xdx "}else{e=" :"+e+": "}if(document.getElementById("comment")&&document.getElementById("comment").type=="textarea"){o=document.getElementById("comment")}else{return false}if(document.selection){o.focus();sel=document.selection.createRange();sel.text=e;o.focus()}else if(o.selectionStart||o.selectionStart=="0"){var n=o.selectionStart;var s=o.selectionEnd;var r=s;o.value=o.value.substring(0,n)+e+o.value.substring(s,o.value.length);r+=e.length;o.focus();o.selectionStart=r;o.selectionEnd=r}else{o.value+=e;o.focus()}}if($("div").hasClass("popcontainer")){loadBotui()}$("bot-ui").click(function(){loadBotui()});function add_copyright(){document.body.addEventListener("copy",function(t){if(!mashiro_global.is_user_logged_in&&window.getSelection().toString().length>30){e(t)}});function e(e){e.preventDefault();var t=""+"著作权归作者所有。<br>"+"商业转载请联系作者获得授权，非商业转载请注明出处。<br>"+"作者："+mashiro_option.author_name+"<br>"+"链接："+window.location.href+"<br>"+"来源："+mashiro_option.site_name+"<br><br>"+window.getSelection().toString().replace(/\r\n/g,"<br>");var a=""+"著作权归作者所有。\n"+"商业转载请联系作者获得授权，非商业转载请注明出处。\n"+""+mashiro_option.author_name+"\n"+"链接："+window.location.href+"\n"+"来源："+mashiro_option.site_name+"\n\n"+window.getSelection().toString().replace(/\r\n/g,"\n");if(e.clipboardData){e.clipboardData.setData("text/html",t);e.clipboardData.setData("text/plain",a);addComment.createButterbar("复制成功！<br>Copied to clipboard successfully!",1e3)}else if(window.clipboardData){return window.clipboardData.setData("text",a)}}}add_copyright();$(function(){inlojv_js_getqqinfo()});function inlojv_js_getqqinfo(){var e=false;var t=/^[0-9]+$/;if(!getCookie("user_qq")&&!getCookie("user_qq_email")&&!getCookie("user_author")){$("input#qq,input#author,input#email,input#url").val("")}if(getCookie("user_avatar")&&getCookie("user_qq")&&getCookie("user_qq_email")){$("div.comment-user-avatar img").attr("src",getCookie("user_avatar"));$("input#author").val(getCookie("user_author"));$("input#email").val(getCookie("user_qq")+"@qq.com");$("input#qq").val(getCookie("user_qq"));if(mashiro_option.qzone_autocomplete){$("input#url").val("https://user.qzone.qq.com/"+getCookie("user_qq"))}if($("input#qq").val()){$(".qq-check").css("display","block");$(".gravatar-check").css("display","none")}}var a=$("input#email").val();$("input#author").on("blur",function(){var i=$("input#author").val();$.ajax({type:"get",url:mashiro_option.qq_api_url+"?type=getqqnickname&qq="+i,dataType:"jsonp",jsonp:"callback",jsonpCallback:"portraitCallBack",success:function(t){$("input#author").val(t[i][6]);$("input#email").val($.trim(i)+"@qq.com");if(mashiro_option.qzone_autocomplete){$("input#url").val("https://user.qzone.qq.com/"+$.trim(i))}$("div.comment-user-avatar img").attr("src","https://q2.qlogo.cn/headimg_dl?dst_uin="+i+"&spec=100");e=true;$("input#qq").val($.trim(i));if($("input#qq").val()){$(".qq-check").css("display","block");$(".gravatar-check").css("display","none")}setCookie("user_author",t[i][6],30);setCookie("user_qq",i,30);setCookie("is_user_qq","yes",30);setCookie("user_qq_email",i+"@qq.com",30);setCookie("user_email",i+"@qq.com",30);a=$("input#email").val()},error:function(){if(t.test(i)){addComment.createButterbar("QQ号不存在（建议不要使用纯数字昵称）")}$("input#qq").val("");$(".qq-check").css("display","none");$(".gravatar-check").css("display","block");$("div.comment-user-avatar img").attr("src",get_gravatar($("input#email").val(),80));setCookie("user_qq","",30);setCookie("user_email",$("input#email").val(),30);setCookie("user_avatar",get_gravatar($("input#email").val(),80),30)}});$.ajax({type:"get",url:mashiro_option.qq_avatar_api_url+"?type=getqqavatar&qq="+i,dataType:"jsonp",jsonp:"callback",jsonpCallback:"qqavatarCallBack",beforeSend:function(){if(t.test(i)){addComment.createButterbar("正在获取QQ头像...")}},success:function(e){$("div.comment-user-avatar img").attr("src",e[i]);addComment.createButterbar("QQ头像获取成功");setCookie("user_avatar",e[i],30)},error:function(){if(t.test(i)){addComment.createButterbar("QQ号不存在（建议不要使用纯数字昵称）")}$("input#qq","input#email","input#url").val("");if(!$("input#qq").val()){$(".qq-check").css("display","none");$(".gravatar-check").css("display","block");setCookie("user_qq","",30);$("div.comment-user-avatar img").attr("src",get_gravatar($("input#email").val(),80));setCookie("user_avatar",get_gravatar($("input#email").val(),80),30)}}})});if(getCookie("user_avatar")&&getCookie("user_email")&&getCookie("is_user_qq")=="no"&&!getCookie("user_qq_email")){$("div.comment-user-avatar img").attr("src",getCookie("user_avatar"));$("input#email").val(getCookie("user_email"));$("input#qq").val("");if(!$("input#qq").val()){$(".qq-check").css("display","none");$(".gravatar-check").css("display","block")}}$("input#email").on("blur",function(){var t=$("input#email").val();if(e==false||a!=t){$("div.comment-user-avatar img").attr("src",get_gravatar(t,80));setCookie("user_avatar",get_gravatar(t,80),30);setCookie("user_email",t,30);setCookie("user_qq_email","",30);setCookie("is_user_qq","no",30);$("input#qq").val("");if(!$("input#qq").val()){$(".qq-check").css("display","none");$(".gravatar-check").css("display","block")}}});if(getCookie("user_url")){$("input#url").val(getCookie("user_url"))}$("input#url").on("blur",function(){var e=$("input#url").val();$("input#url").val(e);setCookie("user_url",e,30)});if(getCookie("user_author")){$("input#author").val(getCookie("user_author"))}$("input#author").on("blur",function(){var e=$("input#author").val();$("input#author").val(e);setCookie("user_author",e,30)})}function get_poem(e,t){var a=document.querySelector(e);var i=document.querySelector(t);var o=new XMLHttpRequest;o.open("get","https://v2.jinrishici.com/one.json");o.withCredentials=true;o.onreadystatechange=function(){
if(o.readyState===4){var e=JSON.parse(o.responseText);a.innerHTML=e.data.content;i.innerHTML="【"+e.data.origin.dynasty+"】"+e.data.origin.author+"《"+e.data.origin.title+"》"}};o.send()}function loadBotui(){if($("div").hasClass("popcontainer")){if(mashiro_global.variables.has_bot_ui){bot_ui_ini()}else{$.getScript("https://cdn.jsdelivr.net/gh/moezx/cdn@latest/js/botui/botui.js",function(){bot_ui_ini();mashiro_global.variables.has_bot_ui=true})}}}function mail_me(){var e="mailto:"+mashiro_option.email_name+"@"+mashiro_option.email_domain;window.open(e)}function hearthstone_deck_iframe(){if($("iframe").hasClass("hearthstone-deck")){$(".hearthstone-deck").each(function(){$(this).attr("height",$(this).width()*5/9+"px")});$(".hearthstone-deck-container").each(function(){var e=$(this).width()*5/9+14;$(this).css("height",e+"px")})}}var currentFontIsUbuntu=true;function changeFont(){if(currentFontIsUbuntu){loadCSS("https://cdn.jsdelivr.net/gh/moezx/cdn@3.1.8/css/cn.css");currentFontIsUbuntu=false}else{loadCSS("https://cdn.jsdelivr.net/gh/moezx/cdn@3.1.8/css/or.css");currentFontIsUbuntu=true}}function convertChinese(e){if(e=="cn"){$("#zh_cn").css("display","none");$("#zh_tw").css("display","inline-block");loadCSS("https://cdn.jsdelivr.net/gh/moezx/cdn@3.1.8/css/tw.css")}if(e=="tw"){$("#zh_tw").css("display","none");$("#zh_cn").css("display","inline-block");loadCSS("https://cdn.jsdelivr.net/gh/moezx/cdn@3.1.8/css/cn.css")}}mashiro_global.ini.normalize();if(window.location.hostname=="lovelive.2heng.xin"){Poi.ajaxurl=Poi.ajaxurl.replace("//2heng.xin","")}var home=location.href,s=$("#bgvideo")[0],Siren={MN:function(){$(".iconflat").on("click",function(){if($("#main-container").hasClass("open")){$(".iconflat").css("width","50px").css("height","50px");$(".openNav").css("height","50px")}else{$(".iconflat").css("width","100%").css("height","100%");$(".openNav").css("height","100%")}$("body").toggleClass("navOpen");$("#main-container,#mo-nav,.openNav").toggleClass("open")})},MNH:function(){if($("body").hasClass("navOpen")){$("body").toggleClass("navOpen");$("#main-container,#mo-nav,.openNav").toggleClass("open")}},splay:function(){$("#video-btn").addClass("video-pause").removeClass("video-play").show();$(".video-stu").css({bottom:"-100px"});$(".focusinfo").css({top:"-999px"});$("#banner_wave_1").addClass("banner_wave_hide");$("#banner_wave_2").addClass("banner_wave_hide");for(var e=0;e<ap.length;e++){try{ap[e].destroy()}catch(t){}}try{hermitInit()}catch(t){}s.play()},spause:function(){$("#video-btn").addClass("video-play").removeClass("video-pause");$(".focusinfo").css({top:"49.3%"});$("#banner_wave_1").removeClass("banner_wave_hide");$("#banner_wave_2").removeClass("banner_wave_hide");s.pause()},liveplay:function(){if(s.oncanplay!=undefined&&$(".haslive").length>0){if($(".videolive").length>0){Siren.splay()}}},livepause:function(){if(s.oncanplay!=undefined&&$(".haslive").length>0){Siren.spause();$(".video-stu").css({bottom:"0px"}).html("已暂停 ...")}},addsource:function(){$(".video-stu").html("正在载入视频 ...").css({bottom:"0px"});var e=Poi.movies.name.split(","),t=e[Math.floor(Math.random()*e.length)];$("#bgvideo").attr("src",Poi.movies.url+"/"+t+".mp4");$("#bgvideo").attr("video-name",t)},LV:function(){var e=$("#video-btn");e.on("click",function(){if($(this).hasClass("loadvideo")){$(this).addClass("video-pause").removeClass("loadvideo").hide();Siren.addsource();s.oncanplay=function(){Siren.splay();$("#video-add").show();e.addClass("videolive");e.addClass("haslive")}}else{if($(this).hasClass("video-pause")){Siren.spause();e.removeClass("videolive");$(".video-stu").css({bottom:"0px"}).html("已暂停 ...")}else{Siren.splay();e.addClass("videolive")}}s.onended=function(){$("#bgvideo").attr("src","");$("#video-add").hide();e.addClass("loadvideo").removeClass("video-pause");e.removeClass("videolive");e.removeClass("haslive");$(".focusinfo").css({top:"49.3%"})}});$("#video-add").on("click",function(){Siren.addsource()})},AH:function(){if(Poi.windowheight=="auto"){if($("h1.main-title").length>0){var e=$(window).height();$("#centerbg").css({height:e});$("#bgvideo").css({"min-height":e});$(window).resize(function(){Siren.AH()})}}else{$(".headertop").addClass("headertop-bar")}},PE:function(){if($(".headertop").length>0){if($("h1.main-title").length>0){$(".blank").css({"padding-top":"0px"});$(".headertop").css({height:"auto"}).show();if(Poi.movies.live=="open")Siren.liveplay()}else{$(".blank").css({"padding-top":"75px"});$(".headertop").css({height:"0px"}).hide();Siren.livepause()}}},CE:function(){$(".comments-hidden").show();$(".comments-main").hide();$(".comments-hidden").click(function(){$(".comments-main").slideDown(500);$(".comments-hidden").hide()});$(".archives").hide();$(".archives:first").show();$("#archives-temp h3").click(function(){$(this).next().slideToggle("fast");return false});$(".js-toggle-search").on("click",function(){$(".js-toggle-search").toggleClass("is-active");$(".js-search").toggleClass("is-visible")});$(".search_close").on("click",function(){if($(".js-search").hasClass("is-visible")){$(".js-toggle-search").toggleClass("is-active");$(".js-search").toggleClass("is-visible")}});$("#show-nav").on("click",function(){if($("#show-nav").hasClass("showNav")){$("#show-nav").removeClass("showNav").addClass("hideNav");$(".site-top .lower nav").addClass("navbar");$(".mobile-fit-control").removeClass("hide");if(screen&&screen.width<=1200){$(".site-title").toggle()}}else{$("#show-nav").removeClass("hideNav").addClass("showNav");$(".site-top .lower nav").removeClass("navbar");$(".mobile-fit-control").addClass("hide");if(screen&&screen.width<=1200){$(".site-title").toggle()}}});$("#loading").click(function(){$("#loading").fadeOut(500)})},NH:function(){var e=0,t=50,a=$(document).scrollTop();$(window).scroll(function(){var i=$(document).scrollTop();if(i==e){$(".site-header").removeClass("yya")}if(i>e){$(".site-header").addClass("yya")}if(i>t){$(".site-header").addClass("gizle");if(i>a){$(".site-header").removeClass("sabit")}else{$(".site-header").addClass("sabit")}a=i}})},XLS:function(){$body=window.opera?document.compatMode=="CSS1Compat"?$("html"):$("body"):$("html,body");$("body").on("click","#pagination a",function(){$(this).addClass("loading").text("");$.ajax({type:"POST",url:$(this).attr("href")+"#main",success:function(e){result=$(e).find("#main .post");nextHref=$(e).find("#pagination a").attr("href");$("#main").append(result.fadeIn(500));$("#pagination a").removeClass("loading").text("Previous");lazyload();mashiro_global.post_list_show_animation.ini(50);if(nextHref!=undefined){$("#pagination a").attr("href",nextHref)}else{$("#pagination").html("<span>很高兴你翻到这里，但是真的没有了...</span>")}}});return false})},XCS:function(){var e=jQuery("#cancel-comment-reply-link"),t=e.text(),a="commentwrap";jQuery(document).on("submit","#commentform",function(){jQuery.ajax({url:Poi.ajaxurl,data:jQuery(this).serialize()+"&action=ajax_comment",type:jQuery(this).attr("method"),beforeSend:addComment.createButterbar("提交中(Commiting)...."),error:function(e){var t=addComment;t.createButterbar(e.responseText)},success:function(e){jQuery("textarea").each(function(){this.value=""});var t=addComment,i=t.I("cancel-comment-reply-link"),o=t.I("wp-temp-form-div"),n=t.I(t.respondId),s=t.I("comment_post_ID").value,r=t.I("comment_parent").value;if(r!="0"){jQuery("#respond").before('<ol class="children">'+e+"</ol>")}else if(!jQuery("."+a).length){if(Poi.formpostion=="bottom"){jQuery("#respond").before('<ol class="'+a+'">'+e+"</ol>")}else{jQuery("#respond").after('<ol class="'+a+'">'+e+"</ol>")}}else{if(Poi.order=="asc"){jQuery("."+a).append(e)}else{jQuery("."+a).prepend(e)}}t.createButterbar("提交成功(Succeed)");lazyload();code_highlight_style();click_to_view_image();clean_upload_images();i.style.display="none";i.onclick=null;t.I("comment_parent").value="0";if(o&&n){o.parentNode.insertBefore(n,o);o.parentNode.removeChild(o)}}});return false});addComment={moveForm:function(a,i,o){var n=this,s,r=n.I(a),l=n.I(o),c=n.I("cancel-comment-reply-link"),d=n.I("comment_parent"),u=n.I("comment_post_ID");e.text(t);n.respondId=o;if(!n.I("wp-temp-form-div")){s=document.createElement("div");s.id="wp-temp-form-div";s.style.display="none";l.parentNode.insertBefore(s,l)}!r?(temp=n.I("wp-temp-form-div"),n.I("comment_parent").value="0",temp.parentNode.insertBefore(l,temp),temp.parentNode.removeChild(temp)):r.parentNode.insertBefore(l,r.nextSibling);jQuery("body").animate({scrollTop:jQuery("#respond").offset().top-180},400);d.value=i;c.style.display="";c.onclick=function(){var e=addComment,t=e.I("wp-temp-form-div"),a=e.I(e.respondId);e.I("comment_parent").value="0";if(t&&a){t.parentNode.insertBefore(a,t);t.parentNode.removeChild(t)}this.style.display="none";this.onclick=null;return false};try{n.I("comment").focus()}catch(p){}return false},I:function(e){return document.getElementById(e)},clearButterbar:function(e){if(jQuery(".butterBar").length>0){jQuery(".butterBar").remove()}},createButterbar:function(e,t){var a=this;a.clearButterbar();jQuery("body").append('<div class="butterBar butterBar--center"><p class="butterBar-message">'+e+"</p></div>");if(t>0){setTimeout("jQuery('.butterBar').remove()",t)}else{setTimeout("jQuery('.butterBar').remove()",6e3)}}}},XCP:function(){$body=window.opera?document.compatMode=="CSS1Compat"?$("html"):$("body"):$("html,body");$("body").on("click","#comments-navi a",function(e){e.preventDefault();$.ajax({type:"GET",url:$(this).attr("href"),beforeSend:function(){$("#comments-navi").remove();$("ul.commentwrap").remove();$("#loading-comments").slideDown();$body.animate({scrollTop:$("#comments-list-title").offset().top-65},800)},dataType:"html",success:function(e){result=$(e).find("ul.commentwrap");nextlink=$(e).find("#comments-navi");$("#loading-comments").slideUp("fast");$("#loading-comments").after(result.fadeIn(500));$("ul.commentwrap").after(nextlink);lazyload();code_highlight_style();click_to_view_image()}})})},IA:function(){POWERMODE.colorful=true;POWERMODE.shake=false;document.body.addEventListener("input",POWERMODE)},GT:function(){var e=100,t=1200,a=700,i=$(".cd-top");$(window).scroll(function(){if($(this).scrollTop()>e){i.addClass("cd-is-visible");$(".changeSkin-gear").css("bottom","0");if($(window).height()>950){$(".cd-top.cd-is-visible").css("top","0")}else{$(".cd-top.cd-is-visible").css("top",$(window).height()-950+"px")}}else{$(".changeSkin-gear").css("bottom","-999px");$(".cd-top.cd-is-visible").css("top","-900px");i.removeClass("cd-is-visible cd-fade-out")}if($(this).scrollTop()>t){i.addClass("cd-fade-out")}});i.on("click",function(e){e.preventDefault();$("body,html").animate({scrollTop:0},a)})}};$(function(){Siren.AH();Siren.PE();Siren.NH();Siren.GT();Siren.XLS();Siren.XCS();Siren.XCP();Siren.CE();Siren.MN();Siren.IA();Siren.LV();if(window.is_app)injectStyles("#nprogress .bar { display: none; }");if(Poi.pjax){$(document).pjax("a[target!=_top]","#page",{fragment:"#page",timeout:8e3}).on("pjax:send",function(){$("#bar").css("width","0%");if(mashiro_option.NProgressON)NProgress.start();Siren.MNH()}).on("pjax:complete",function(){Siren.AH();Siren.PE();Siren.CE();if(mashiro_option.NProgressON)NProgress.done();mashiro_global.ini.pjax();$("#loading").fadeOut(500);if(Poi.codelamp=="open"){self.Prism.highlightAll(event)}if($(".ds-thread").length>0){if(typeof DUOSHUO!=="undefined"){DUOSHUO.EmbedThread(".ds-thread")}else{$.getScript("//static.duoshuo.com/embed.js")}}}).on("submit",".search-form,.s-search",function(e){e.preventDefault();$.pjax.submit(e,"#page",{fragment:"#page",timeout:8e3});if($(".js-search.is-visible").length>0){$(".js-toggle-search").toggleClass("is-active");$(".js-search").toggleClass("is-visible")}});mashiro_global.lib.pjax_to_url=function(e,t){$.pjax({url:e,container:t,fragment:t,timeout:8e3})};window.addEventListener("popstate",function(e){Siren.AH();Siren.PE();Siren.CE();timeSeriesReload(true)},false)}$.fn.postLike=function(){if($(this).hasClass("done")){return false}else{$(this).addClass("done");var e=$(this).data("id"),t=$(this).data("action"),a=$(this).children(".count");var i={action:"specs_zan",um_id:e,um_action:t};$.post(Poi.ajaxurl,i,function(e){$(a).html(e)});return false}};$(document).on("click",".specsZan",function(){$(this).postLike()});console.log("%c Mashiro %c","background:#24272A; color:#ffffff","","https://2heng.xin/");console.log("%c Github %c","background:#24272A; color:#ffffff","","https://github.com/mashirozx")});var isWebkit=navigator.userAgent.toLowerCase().indexOf("webkit")>-1,isOpera=navigator.userAgent.toLowerCase().indexOf("opera")>-1,isIe=navigator.userAgent.toLowerCase().indexOf("msie")>-1;if((isWebkit||isOpera||isIe)&&document.getElementById&&window.addEventListener){window.addEventListener("hashchange",function(){var e=location.hash.substring(1),t;if(!/^[A-z0-9_-]+$/.test(e)){return}t=document.getElementById(e);if(t){if(!/^(?:a|select|input|button|textarea)$/i.test(t.tagName)){t.tabIndex=-1}t.focus()}},false)}loadCSS(mashiro_option.jsdelivr_css_src);function render(e,t){var a=/(\\)?\{([^\{\}\\]+)(\\)?\}/g;return e.replace(a,function(e,a,i,o){if(a||o){return e.replace("\\","")}var n=i.replace(/\s/g,"").split(".");var s=t;var r,l,c;for(r=0,l=n.length;r<l;++r){c=n[r];s=s[c];if(s===undefined||s===null)return""}return s})}String.prototype.render=function(e){return render(this,e)};$(document).ready(function(){setTimeout(function(){isFirstLoad=true;if(document.body.clientWidth>860){$(".changeSkin-gear").css("visibility","visible")}$("p").remove(".head-copyright")},0)});if($("div").hasClass("aplayer")){reloadHermit()}function aplayerF(){"use strict";var e=[],t=function(){function t(t,a){var i={container:t,audio:a,mini:null,fixed:null,autoplay:!1,mutex:!0,lrcType:3,listFolded:!1,preload:"auto",theme:"#2980b9",loop:"all",order:"list",volume:null,listMaxHeight:null,customAudioType:null,storageName:"metingjs"};if(a.length){a[0].lrc||(i.lrcType=0);var o={};for(var n in i){var s=n.toLowerCase();(t.dataset.hasOwnProperty(s)||t.dataset.hasOwnProperty(n)||null!==i[n])&&(o[n]=t.dataset[s]||t.dataset[n]||i[n],("true"===o[n]||"false"===o[n])&&(o[n]="true"==o[n]))}e.push(new APlayer(o))}for(var s=0;s<e.length;s++)try{e[s].lrc.hide()}catch(t){console.log(t)}var r=1;$(".aplayer.aplayer-fixed").click(function(){if(r==1){for(var t=0;t<e.length;t++)try{e[t].lrc.show()}catch(a){console.log(a)}}r=2});var l=0;$(".aplayer.aplayer-fixed .aplayer-body").addClass("ap-hover");$(".aplayer-miniswitcher").click(function(){if(l==0){$(".aplayer.aplayer-fixed .aplayer-body").removeClass("ap-hover");l=1}else{$(".aplayer.aplayer-fixed .aplayer-body").addClass("ap-hover");l=0}})}var a="https://api.i-meto.com/meting/api?server=:server&type=:type&id=:id&r=:r";"undefined"!=typeof meting_api&&(a=meting_api);for(var i=0;i<e.length;i++)try{e[i].destroy()}catch(t){console.log(t)}e=[];for(var o=document.querySelectorAll(".aplayer"),n=function(){var e=o[s],i=e.dataset.id;if(i){var n=e.dataset.api||a;n=n.replace(":server",e.dataset.server),n=n.replace(":type",e.dataset.type),n=n.replace(":id",e.dataset.id),n=n.replace(":auth",e.dataset.auth),n=n.replace(":r",Math.random());var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===r.readyState&&(200<=r.status&&300>r.status||304===r.status)){var a=JSON.parse(r.responseText);t(e,a)}},r.open("get",n,!0),r.send(null)}else if(e.dataset.url){var l=[{name:e.dataset.name||e.dataset.title||"Audio name",artist:e.dataset.artist||e.dataset.author||"Audio artist",url:e.dataset.url,cover:e.dataset.cover||e.dataset.pic,lrc:e.dataset.lrc,type:e.dataset.type||"auto"}];t(e,l)}},s=0;s<o.length;s++)n()};document.addEventListener("DOMContentLoaded",t,!1)}if(document.body.clientWidth>860){aplayerF()}
//rebuild by neat 